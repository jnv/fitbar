'use strict';

var includeFolder = require('include-folder');
var Svgo = require('svgo');
var path = require('path');

var icons = includeFolder(path.join(__dirname, 'icons'));
var names = Object.keys(icons);
var length = names.length;
var svgo = new Svgo();

function outputIcons(iconsObj) {
  console.log(JSON.stringify(iconsObj));
}

names.forEach(function(key) {
  var svg = icons[key];
  svgo.optimize(svg, function(result) {
    icons[key] = result.data;
    length--;
    if (length === 0) {
      outputIcons(icons);
    }
  });
});
